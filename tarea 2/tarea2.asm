#INCLUDE "P16F877A.INC"

REG1 EQU 0X50
REG2 EQU 0X51
REG3 EQU 0X52
REG4 EQU 0X53
REG5 EQU 0X54
REG6 EQU 0X55
REG7 EQU 0X56
REG8 EQU 0X57
REG9 EQU 0X58
REG10 EQU 0X59
REG11 EQU 0X5A
REG12 EQU 0X5B
REG13 EQU 0X5C
REG14 EQU 0X5D
REG15 EQU 0X5E
REG16 EQU 0X5F
REG17 EQU 0X60
REG18 EQU 0X61
REG19 EQU 0X62
REG20 EQU 0X63
REG21 EQU 0X64
REG22 EQU 0X65
REG23 EQU 0X66
REG24 EQU 0X67
REG25 EQU 0X68
REG26 EQU 0X69
REG27 EQU 0X6A
REG28 EQU 0X6B
REG29 EQU 0X6C
REG30 EQU 0X6D
REG31 EQU 0X6E
REG32 EQU 0X6F
CUENTA EQU 0X20
VECES	EQU 0X21
CANTUNOS	EQU	0X22
CEROS	EQU 0X23
AUX 	EQU	0X24
DESBORDE	EQU	0X25

	ORG 0X00

	MOVLW 	0X53
	MOVWF 	REG1
	MOVLW 	0X53
	MOVWF 	REG2
	MOVLW 	0X53
	MOVWF 	REG3
	MOVLW 	0X53
	MOVWF 	REG4
	MOVLW 	0X53
	MOVWF 	REG5
	MOVLW 	0X53
	MOVWF 	REG6
	MOVLW 	0X53
	MOVWF 	REG7
	MOVLW 	0X53
	MOVWF 	REG8
	MOVLW 	0X53
	MOVWF 	REG9
	MOVLW 	0X53
	MOVWF 	REG10
	MOVLW 	0X53
	MOVWF 	REG11
	MOVLW 	0X53
	MOVWF 	REG12
	MOVLW 	0X53
	MOVWF 	REG13
	MOVLW 	0X53
	MOVWF 	REG14
	MOVLW 	0X53
	MOVWF 	REG15
	MOVLW 	0X53
	MOVWF 	REG16
	MOVLW 	0X53
	MOVWF 	REG17
	MOVLW 	0X53
	MOVWF 	REG18
	MOVLW 	0X53
	MOVWF 	REG19
	MOVLW 	0X53
	MOVWF 	REG20
	MOVLW 	0X53
	MOVWF 	REG21
	MOVLW 	0X53
	MOVWF 	REG22
	MOVLW 	0X53
	MOVWF 	REG23
	MOVLW 	0X53
	MOVWF 	REG24
	MOVLW 	0X53
	MOVWF 	REG25
	MOVLW 	0X53
	MOVWF 	REG26
	MOVLW 	0X53
	MOVWF 	REG27
	MOVLW 	0X53
	MOVWF 	REG28
	MOVLW 	0X53
	MOVWF 	REG29
	MOVLW 	0X53
	MOVWF 	REG30
	MOVLW 	0X53
	MOVWF 	REG31
	MOVLW 	0X53
	MOVWF 	REG32
	
	MOVLW 	D'32'
	MOVWF 	CUENTA
	MOVLW	0X50
	MOVWF	FSR
SIGO:
	CALL	CANTCEROS	;RUTINA QUE CUENTA CUANTOS REGISTROS SON 0
	CALL	CONTARUNOS	; RUTINA QUE CUENTA LA CANTIDAD DE "1" QUE HAY EN TOTAL EN TODOS LOS REGISTROS
	INCF	FSR,F
	DECFSZ	CUENTA,F
	GOTO	SIGO
	BTFSC	STATUS,C; SE VERIFICA QUE EL REGISTRO CANTUNOS NO SE HAYA DESBODADO
	INCF	DESBORDE,F; SI FUE ASI INCREMENTA EN UNO A DESBORDE
	GOTO	$	;SE DETIENE EL PROGRAMA

CANTCEROS:
	MOVF	INDF,F	; SE MUEVE INDF A INDF YA QUE INTERVIENE EL BIT Z DEL
	BTFSS	STATUS,Z;REGISTRO STATUS SI INDF ERA CERO Y SE MOVIO AL MISMO REGISTRO Z VA A SER "1"
	INCF	CEROS,F
	RETURN

CONTARUNOS:
	MOVLW	D'8'	
	MOVWF	VECES	;VECES LLEVA EL CONTEO DE LAS VECES QUE SE VA ROTAR EL REGISTRO AUX	
	MOVF	INDF,W
	MOVWF	AUX
ATRAS:
	BTFSC	AUX,0		;SE TESTEA EL BIT 0 DE AUX EN CASO DE QUE SEA "1"
	INCF	CANTUNOS,F	;SE INCREMENTA EL CONTADOR (CANTUNOS)
	RRF		AUX,F		; SE ROTA EL REGISTRO HACIA LA DERECHA 
	DECFSZ	VECES,F		; Y SE VUELVE A HACER LOS PASOS ANTERIORES 8 VECES EN TOTAL
	GOTO	ATRAS
	RETURN
	
	END
	

